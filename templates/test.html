{% extends "base.html" %}

{% block content %}
<style>
    .dataTables_filter { /* tako da hide-a njihov default search button*/
        display: none;
    }
</style>
<div style="width: 80%; margin-left: 10%">
    <h2><b>{{test.title}}</b></h2>
    <div style="/*position: absolute; right: 200px*/"> <!-- ne radi input ako styleam?????-->
        <input id="input" placeholder="pretrazi" />
    </div>
    <table id="example" class="table /*table-striped*/ /*table-bordered*/" style="width:100%">
      <thead>
          <tr>
              <th></th>
              <th>Zadatak</th>
              <th>Rezultat</th>
              <th>
                <svg xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        fill="currentColor"
                        class="bi bi-tags-fill"
                        viewBox="0 0 16 16">
                    <path d="M2 2a1 1 0 0 1 1-1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 2 6.586V2zm3.5 4a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/>
                    <path d="M1.293 7.793A1 1 0 0 1 1 7.086V2a1 1 0 0 0-1 1v4.586a1 1 0 0 0 .293.707l7 7a1 1 0 0 0 1.414 0l.043-.043-7.457-7.457z"/>
                </svg>
                  Tagovi</th>
          </tr>
      </thead>
      <tbody>
        {% for assignment in assignments %}
            <tr role="row" class="odd">
                <td class="result">
                    {% if assignment.percentage == 100 %}
                        <i class="fa-solid fa-check" style="color: green;"></i>
                    {% else %}    
                        <i class="fa-solid fa-xmark" style="color: red;"></i>
                    {% endif %}
                </td>
                <td>
                    <a href="{% url 'uoop:assignment' assignment.id %}">{{ assignment.title }}</a>
                </td>
                <td class="testresults">
                    <div class="progress">
                        <div class="progress-bar bg-success" role="progressbar" aria-valuenow="{{ assignment.percentage }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ assignment.percentage }}%"> <!--iako baca error, svejedno radi kako treba, ako dodas jos '' onda ne prikazuje kako treba-->
                            {{ assignment.percentage }}%
                        </div>
                    </div>
                </td>
                <td class="tags ellipsis" title="izlaz, ulaz">
                    <!-- <span>{{ assignment.tags.name }}</span> kaze da je none ??-->
                    {% for tag in assignment.tags.all %}
                        <button type="button" class="btn btn-primary btn-xs">{{ tag.name }}</button>
                    {% endfor %}
                </td>
            </tr>
        {% endfor %}
        <tr role="row" class="odd">
            <td class="result">
                <span class="glyphicon_green glyphicon glyphicon-ok"></span>
            </td>
            <td>
                <a href="">Zadatak 2</a>
            </td>
            <td class="testresults">
                <div class="progress">
                    <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                        60%
                    </div>
                </div>
            </td>
            <td class="tags ellipsis" title="izlaz, ulaz">
                <button class="btn btn-primary btn-xs" type="button">izlaz</button>
                <button type="button" class="btn btn-primary btn-xs">ulaz</button>
            </td>
        </tr>
        <tr role="row" class="odd">
            <td class="result">
                <span class="glyphicon_green glyphicon glyphicon-ok"></span>
            </td>
            <td>
                <a href="">Zadatak 3</a>
            </td>
            <td class="testresults">
                <div class="progress">
                    <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" style="width: 30%">
                        30%
                    </div>
                </div>
            </td>
            <td class="tags ellipsis" title="izlaz, ulaz">
                <button class="btn btn-primary btn-xs" type="button">izlaz</button>
                <button type="button" class="btn btn-primary btn-xs">ulaz</button>
            </td>
        </tr>
         <tr role="row" class="odd">
            <td class="result">
                <span class="glyphicon_green glyphicon glyphicon-ok"></span>
            </td>
            <td>
                <a href="">Kviz</a>
                <!-- Button koji otvara modal s informacijama o pisanju ispita -->
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">Otvori ispit</button>
            </td>
            <td class="testresults">
               <!----> <div class="progress">
                   <!-- <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" style="width: 30%">
                        30%
                    </div> 
                </div> -->
            </td>
            <td class="tags ellipsis" title="izlaz, ulaz">
               <!--  <button class="btn btn-primary btn-xs" type="button">izlaz</button>
                <button type="button" class="btn btn-primary btn-xs">ulaz</button> -->
            </td>
        </tr>
    </tbody>
  </table>
</div>


<span id = "score"></span>
<!-- Informativni modal -->
<div class="modal fade " id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel"><span id = "span_ispitIme" >1. kontrolna zadaća</h5> <!-- Dinamičan span s imenom ispita -->
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" id = "button_closeModal1"> <!-- Križić kojim se zatvara modal -->
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id = "span_uputeKviz"> <!-- Dinamičan span s uputama o ispitu -->
        1. kontrolna zadaća prikazuje način polaganja kolegija putem uoop-riteh.hr sustava. Broj pokušaja je neograničen a ostvareni rezultati se ne evidentiraju.<br>

        Vremensko ograničenje: <span id = "span_ukupnoVrijeme">2</span> min
      </div>
      <div class="modal-footer">
        <!-- Button koji otvara kviz i započinje odbrojavanje timera-->
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#staticBackdrop" id = "button_pokreniKviz"> Pokreni ispit </button>
      </div>
    </div>
  </div>
</div>

 
<!-- Modal s kvizom, static data-backdrop kako se kviz klikom izvan modala ne bi zatvorio-->
<div class="modal fade" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog" style="max-width: 80%;" >
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="staticBackdropLabel">Zadatak <span id = "span_brojZadatka">1</span></h4> <!-- Dinamičan broj zadatka -->
        <tab><button type="button" id = "timer" class="btn btn-primary" disabled><span id = "span_preostaloVrijeme"></span></button> <!-- Button u kojem se nalazi preostalo vrijeme, u zadnjoj minuti mijenja boju -->
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" id = "button_closeModal2"> <!-- Križić kojim se aktivira alert box -->
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id = "div_slika"> <!--Mjesto gdje se prikazuje slika -->
      </div>
      <div class="modal-body" id = "div_pitanje"> <!--Mjesto gdje se prikazuje pitanje -->
        ...
      </div>
      <div class="modal-body" id = "div_opcijeOdgovora"> <!-- Mjesto gdje se prikazuju radio buttoni -->
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger
        " data-dismiss="modal" id = "button_zavrsiKviz" >Završi kviz</button> <!--Button  kojim se aktivira alert box-->
         <button type="button" class="btn btn-primary" id = "button_iducePitanje">Iduće pitanje</button> <!-- button za odlazak na iduće pitanje i pohranu odgovora -->
      </div>
    </div>
  </div>
</div>

<script>
  // $(document).ready(function() {
  //     $('#example').DataTable({
  //         "ordering": false,
  //     });
  // } );
  oTable = $('#example').DataTable({
      "ordering": false,
      // "searching": false,
      // "bFilter": false,
      // "dom": "lrt",
  });
  $('#input').keyup(function(){ //za custom search button
      oTable.search($(this).val()).draw() ;
  })
  // $("example_filter").css("display", "none")
  // $("example_filter").addClass("hidden")
  // document.getElementById("example_length").innerHTML = "ej"
  // document.getElementById("example_length").innerHTML = document.getElementsByClassName("custom-select custom-select-sm form-control form-control-sm")[0]
//   document.write(document.getElementsByClassName("custom-select custom-select-sm form-control form-control-sm")[0])
</script>
{% load static %}
<script src="{% static 'admin/js/modal.js' %}" ></script>
{% endblock content %}
